# auto-weave

<!--- All the badges! --->
[![Maven Central](https://img.shields.io/maven-central/v/com.bnorm.auto.weave/auto-weave.svg?maxAge=7200&style=flat-square)](http://mvnrepository.com/artifact/com.bnorm.auto.weave/auto-weave)
[![Travis](https://img.shields.io/travis/bnorm/auto-weave.svg?maxAge=7200&style=flat-square)](https://travis-ci.org/bnorm/auto-weave)
[![Codecov](https://img.shields.io/codecov/c/github/bnorm/auto-weave.svg?maxAge=7200&style=flat-square)](https://codecov.io/gh/bnorm/auto-weave)
[![Codacy](https://img.shields.io/codacy/ba632994831044a2b3049a5a17e26c45.svg?maxAge=7200&style=flat-square)](https://www.codacy.com/app/bnorm/auto-weave)
[![VersionEye](https://img.shields.io/versioneye/d/user/projects/57489055ce8d0e00360be076.svg?maxAge=7200&style=flat-square)](https://www.versioneye.com/user/projects/57489055ce8d0e00360be076)

AutoWeave generates AOP weaved classes using Java Annotation Processing.

Now available on Maven Central

```xml
<dependency>
    <groupId>com.bnorm.auto.weave</groupId>
    <artifactId>auto-weave</artifactId>
    <version>0.1</version>
</dependency>
```

It works something like this...

```java
@AutoWeave
public abstract class Target {
    public static Target create() { return new AutoWeave_Target(); }
    @Trace String method() {...}
}

@interface Trace {...}

public class TraceAspect {
    @AutoAdvice(Trace.class)
    public Object around(AroundJoinPoint point) {
        System.out.println("Starting method " + point.method());
        Object result = point.proceed();
        System.out.println("Completed method " + point.method() + " with a result of " + result);
        return result;
    }
}

// Generated by auto-weave
final class AutoWeave_Target extends Target {
    private static final Pointcut methodPointcut = Pointcut.create("method");
    private final TraceAspect traceAspect = new TraceAspect();
    @Override
    @Trace
    public String method() {
        Chain chain;
        chain = new MethodChain() {
            @Override
            public Object method() throws Throwable {
                return AutoWeave_Target.super.method();
            }
        };
        chain = new AroundChain(chain, methodPointcut) {
            @Override
            public Object around(AroundJoinPoint joinPoint) {
                return traceAspect.around(joinPoint);
            }
        };
        try {
            return (String) chain.call();
        } catch (MethodException e) {
            if (e.getCause() instanceof Error) {
                throw (Error) e.getCause();
            } else if (e.getCause() instanceof RuntimeException) {
                throw (RuntimeException) e.getCause();
            } else {
                throw new AssertionError("Please contact the library developer", e.getCause());
            }
        }
    }
}
```

## License

    Copyright 2016 Brian Norman

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
