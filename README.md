# auto-weave

AutoWeave generates AOP weaved classes using Java Annotation Processing.

It works something like this...

```java
@AutoWeave
public abstract class Target {
    public static Target create() { return new AutoWeave_Target(); }
    @Trace String method() {...}
}

@interface Trace {...}

public class TraceAspect {
    @AutoAdvice(Trace.class)
    public Object around(AroundJoinPoint point) {
        System.out.println("Starting method " + point.method());
        Object result = point.proceed();
        System.out.println("Completed method " + point.method() + " with a result of " + result);
        return result;
    }
}

// Generated by auto-weave
final class AutoWeave_Target extends Target {
    private static final Pointcut methodPointcut = Pointcut.create("method");
    private final TraceAspect traceAspect = new TraceAspect();
    @Override
    @Trace
    public String method() {
        Chain chain;
        chain = new MethodChain() {
            @Override
            public Object method() throws Throwable {
                return AutoWeave_Target.super.method();
            }
        };
        chain = new AroundChain(chain, methodPointcut) {
            @Override
            public Object around(AroundJoinPoint joinPoint) {
                return traceAspect.around(joinPoint);
            }
        };
        try {
            return (String) chain.call();
        } catch (MethodException e) {
            if (e.getCause() instanceof Error) {
                throw (Error) e.getCause();
            } else if (e.getCause() instanceof RuntimeException) {
                throw (RuntimeException) e.getCause();
            } else {
                throw new AssertionError("Please contact the library developer", e.getCause());
            }
        }
    }
}
```
